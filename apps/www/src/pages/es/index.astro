---
// Spanish homepage — same structure, locale detected from URL
import Base from "@layouts/Base.astro";
import ResourceCard from "@components/ResourceCard.astro";
import { getCollection } from "astro:content";
import { useTranslations } from "@i18n/index";
import { SITE_URLS } from "@lib/urls";

const locale = "es" as const;
const t = useTranslations(locale);
const allResources = await getCollection("resources");
const featured = allResources.slice(0, 6);
const categoryCount = new Set(allResources.map((resource: any) => resource.data.category)).size;
const rotatingWords = (t("hero.rotatingWords") as string).split(",").map((w) => w.trim());
const wordHues = [0, 45, 120, 200, 280, 320];
const homeDescription = "Una librería curada de recursos web reutilizables — animaciones, páginas, componentes y patrones.";
const alternateLinks = [
  { hreflang: "en", href: "https://stealthis.dev/" },
  { hreflang: "es", href: "https://stealthis.dev/es/" },
  { hreflang: "x-default", href: "https://stealthis.dev/" },
];
const structuredData = {
  "@context": "https://schema.org",
  "@type": "WebSite",
  name: "StealThis.dev",
  url: "https://stealthis.dev/es/",
  inLanguage: "es",
  description: homeDescription,
};
---

<Base
  title="StealThis"
  description={homeDescription}
  canonicalPath="/es/"
  alternateLinks={alternateLinks}
  structuredData={structuredData}
>
  <section class="hero-stage relative overflow-hidden pt-20 pb-16 min-w-0">
    <div class="hero-bg absolute inset-0 -z-10" aria-hidden="true">
      <div class="hero-bg-tunnel"></div>
      <div class="hero-bg-noise"></div>
      <div class="hero-bg-glow hero-bg-glow-left"></div>
      <div class="hero-bg-glow hero-bg-glow-right"></div>
      <div class="hero-bg-beam hero-bg-beam-1"></div>
      <div class="hero-bg-beam hero-bg-beam-2"></div>
      <div class="hero-bg-panels">
        <div class="hero-code-card hero-code-card-a">
          <p class="hero-code-lang">HTML</p>
          <p>&lt;button class="btn-primary"&gt;</p>
          <p>  Browse Library</p>
          <p>&lt;/button&gt;</p>
        </div>
        <div class="hero-code-card hero-code-card-b">
          <p class="hero-code-lang">CSS</p>
          <p>.btn-primary &#123;</p>
          <p>  background: #0ea5e9;</p>
          <p>  border-radius: 14px;</p>
          <p>&#125;</p>
        </div>
        <div class="hero-code-card hero-code-card-c">
          <p class="hero-code-lang">JS</p>
          <p>const cta = document.querySelector(".cta");</p>
          <p>cta?.classList.add("ready");</p>
        </div>
        <div class="hero-code-card hero-code-card-d">
          <p class="hero-code-lang">TSX</p>
          <p>&lt;Card variant="glass"&gt;</p>
          <p>  &lt;CTA /&gt;</p>
          <p>&lt;/Card&gt;</p>
        </div>
        <div class="hero-code-card hero-code-card-e">
          <p class="hero-code-lang">Tailwind</p>
          <p>className="rounded-2xl</p>
          <p>border border-cyan-400/30"</p>
        </div>
        <div class="hero-code-card hero-code-card-f">
          <p class="hero-code-lang">Config</p>
          <p>mcp: true</p>
          <p>targets: ["html", "react"]</p>
        </div>
      </div>
    </div>

    <div class="container-xl text-center hero-container min-w-0 relative">
      <div class="hero-cta-shell mx-auto max-w-5xl px-5 py-9 sm:px-10 sm:py-12">
        <h1 class="hero-anim-item text-5xl sm:text-6xl lg:text-7xl font-extrabold tracking-tight leading-[1.15] mb-6 hero-title-gradient min-w-0">
          <span class="block">{t("hero.titlePrefix").trim()}</span>
          <span class="block">
            <span
              class="hero-rotating-wrap inline-block align-baseline overflow-hidden"
              data-words={JSON.stringify(rotatingWords)}
            >
              <span class="hero-rotating-words inline-block">
                {rotatingWords.map((word, i) => (
                  <span class="hero-rotating-word hero-rotating-word-gradient block" style={`--hue-word: ${wordHues[i % wordHues.length]}deg`}>{word}</span>
                ))}
                <span class="hero-rotating-word hero-rotating-word-gradient block" style={`--hue-word: ${wordHues[0]}deg`}>{rotatingWords[0]}</span>
              </span>
            </span>
          </span>
          <span class="block text-2xl sm:text-3xl lg:text-4xl font-semibold hero-suffix-line">{t("hero.titleSuffix").trim()}</span>
        </h1>
        <p class="hero-anim-item text-lg text-slate-300 max-w-2xl mx-auto mb-8 leading-relaxed">
          {t("hero.subtitle.before")}
          <a
            href={`${SITE_URLS.docs}/integrate/`}
            target="_blank"
            rel="noopener"
            class="hero-integrate-link text-brand-400 hover:text-brand-300 font-medium underline underline-offset-2 decoration-brand-500/50 hover:decoration-brand-400 transition-colors"
          >
            {t("hero.subtitle.mcp")}
          </a>
          {t("hero.subtitle.after")}
        </p>
        <form class="hero-anim-item hero-search-shell mx-auto mb-8 max-w-2xl" action="/es/library" method="get">
          <label for="hero-home-search-es" class="sr-only">Buscar recursos</label>
          <svg class="hero-search-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M21 21l-4.3-4.3M11 18a7 7 0 1 1 0-14 7 7 0 0 1 0 14Z" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"></path>
          </svg>
          <input id="hero-home-search-es" name="search" type="search" placeholder="Presiona CMD+K para buscar..." autocomplete="off" />
        </form>
        <div class="hero-anim-item flex flex-wrap gap-3 justify-center">
          <a href="/es/library" class="hero-primary-cta inline-flex items-center gap-2 px-7 py-3.5 rounded-2xl font-semibold text-base">
            {t("hero.cta.browse")}
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M5 12h14M12 5l7 7-7 7"/>
            </svg>
          </a>
          <a href={SITE_URLS.docs} target="_blank" rel="noopener" class="hero-secondary-cta inline-flex items-center gap-2 px-7 py-3.5 rounded-2xl font-semibold text-base">
            {t("hero.cta.docs")}
          </a>
        </div>
      </div>

      <div class="hero-anim-item hero-stats flex items-center justify-center gap-8 mt-10 text-sm flex-wrap">
        <div class="flex flex-col items-center gap-1">
          <span class="hero-count text-2xl font-bold text-white" data-count={allResources.length}>{allResources.length}</span>
          <span class="text-slate-500">Recursos</span>
        </div>
        <div class="w-px h-8 bg-white/10"></div>
        <div class="flex flex-col items-center gap-1">
          <span class="hero-count text-2xl font-bold text-white" data-count={categoryCount}>{categoryCount}</span>
          <span class="text-slate-500">Categorías</span>
        </div>
        <div class="w-px h-8 bg-white/10"></div>
        <div class="flex flex-col items-center gap-1">
          <span class="text-2xl font-bold text-white">MIT</span>
          <span class="text-slate-500">Licencia</span>
        </div>
      </div>
    </div>
  </section>

  <script>
    import { gsap } from "gsap";

    const prefersReducedMotion = () =>
      typeof window !== "undefined" && window.matchMedia("(prefers-reduced-motion: reduce)").matches;

    function initHeroRotatingWords() {
      const wrap = document.querySelector(".hero-rotating-wrap");
      const wordsEl = document.querySelector(".hero-rotating-words");
      if (!wrap || !wordsEl) return;

      const wordsData = wrap.getAttribute("data-words");
      if (!wordsData) return;

      const words: string[] = JSON.parse(wordsData);
      const wordHeight = 1.25;
      const totalSlots = words.length + 1;

      gsap.set(wordsEl, { y: 0 });
      let index = 0;

      function cycle() {
        const next = index + 1;
        const isLast = next === totalSlots - 1;

        gsap.to(wordsEl, {
          y: `-${next * wordHeight}em`,
          duration: 0.6,
          ease: "power2.inOut",
          overwrite: true,
          onComplete: () => {
            if (isLast) {
              gsap.set(wordsEl, { y: 0 });
              index = 0;
            } else {
              index = next;
            }
          },
        });
        if (!isLast) index = next;
      }

      setInterval(cycle, 2500);
    }

    function initHeroEntrance() {
      const items = document.querySelectorAll<HTMLElement>(".hero-anim-item");
      const countEls = document.querySelectorAll<HTMLElement>(".hero-count");
      const reduceMotion = prefersReducedMotion();

      if (reduceMotion) {
        items.forEach((el) => el.style.removeProperty("opacity"));
        countEls.forEach((el) => {
          const target = el.getAttribute("data-count");
          if (target != null) el.textContent = target;
        });
        return;
      }

      gsap.set(items, { opacity: 0, y: 20 });
      countEls.forEach((el) => (el.textContent = "0"));
      const tl = gsap.timeline({ defaults: { ease: "power2.out" } });
      tl.to(items, { opacity: 1, y: 0, duration: 0.6, stagger: 0.1 });
      tl.add(
        () => {
          countEls.forEach((el) => {
            const target = Number(el.getAttribute("data-count"));
            if (Number.isNaN(target)) return;
            const obj = { v: 0 };
            gsap.to(obj, {
              v: target,
              duration: 1.2,
              ease: "power2.out",
              onUpdate: () => {
                el.textContent = String(Math.round(obj.v));
              },
            });
          });
        },
        "-=0.3"
      );
    }

    document.addEventListener("DOMContentLoaded", () => {
      initHeroRotatingWords();
      initHeroEntrance();
    });
  </script>

  <style>
    .hero-stage {
      isolation: isolate;
    }
    .hero-bg {
      background:
        radial-gradient(120% 95% at 12% 12%, rgb(56 189 248 / 24%) 0%, rgb(56 189 248 / 0%) 55%),
        radial-gradient(80% 75% at 85% 15%, rgb(52 211 153 / 20%) 0%, rgb(52 211 153 / 0%) 62%),
        radial-gradient(90% 85% at 50% 100%, rgb(99 102 241 / 14%) 0%, rgb(99 102 241 / 0%) 64%),
        #020813;
    }
    .hero-bg-tunnel {
      position: absolute;
      inset: -20% -50%;
      perspective: 800px;
      transform-style: preserve-3d;
      pointer-events: none;
    }
    .hero-bg-tunnel::before,
    .hero-bg-tunnel::after {
      content: '';
      position: absolute;
      top: -50%;
      width: 100vw;
      height: 200%;
      background-image:
        linear-gradient(rgba(0, 242, 255, 0.4) 1px, transparent 1px),
        linear-gradient(90deg, rgba(0, 242, 255, 0.4) 1px, transparent 1px);
      background-size: 60px 40px;
      opacity: 0.6;
    }
    .hero-bg-tunnel::before {
      left: 0;
      transform-origin: left center;
      transform: rotateY(75deg) translateZ(-400px);
      mask-image: linear-gradient(to right, black, transparent 80%);
      animation: tunnel-slide-left 15s linear infinite;
    }
    .hero-bg-tunnel::after {
      right: 0;
      transform-origin: right center;
      transform: rotateY(-75deg) translateZ(-400px);
      background-image:
        linear-gradient(rgba(0, 255, 102, 0.3) 1px, transparent 1px),
        linear-gradient(90deg, rgba(0, 255, 102, 0.3) 1px, transparent 1px);
      mask-image: linear-gradient(to left, black, transparent 80%);
      animation: tunnel-slide-right 15s linear infinite;
    }
    .hero-bg-noise {
      position: absolute;
      inset: 0;
      background: repeating-linear-gradient(
        0deg,
        rgb(148 163 184 / 6%) 0px,
        rgb(148 163 184 / 6%) 1px,
        transparent 1px,
        transparent 3px
      );
      mix-blend-mode: soft-light;
      opacity: 0.2;
      animation: hero-noise-scan 9s linear infinite;
    }
    .hero-bg-glow {
      position: absolute;
      width: 36rem;
      height: 36rem;
      border-radius: 9999px;
      filter: blur(80px);
      opacity: 0.32;
      animation: hero-glow-orbit 14s ease-in-out infinite;
    }
    .hero-bg-glow-left {
      top: -22%;
      left: -8%;
      background: rgb(56 189 248 / 62%);
      animation-delay: -4s;
    }
    .hero-bg-glow-right {
      top: -18%;
      right: -10%;
      background: rgb(34 197 94 / 42%);
    }
    .hero-bg-beam {
      position: absolute;
      width: 40rem;
      height: 2px;
      opacity: 0.6;
      background: linear-gradient(90deg, transparent, rgb(56 189 248 / 72%), transparent);
      filter: blur(0.3px);
      animation: hero-beam-shift 8s ease-in-out infinite;
    }
    .hero-bg-beam-1 {
      top: 24%;
      left: -12%;
      transform: rotate(14deg);
    }
    .hero-bg-beam-2 {
      top: 18%;
      right: -12%;
      transform: rotate(-14deg);
      animation-delay: -4s;
    }
    .hero-bg-panels {
      position: absolute;
      inset: 0;
      pointer-events: none;
    }
    .hero-code-card {
      position: absolute;
      width: min(18rem, 32vw);
      padding: 0.9rem 1rem;
      border-radius: 18px;
      border: 1px solid rgb(125 211 252 / 24%);
      background: linear-gradient(160deg, rgb(7 20 38 / 86%), rgb(7 20 38 / 46%));
      box-shadow:
        inset 0 0 0 1px rgb(15 23 42 / 55%),
        0 0 30px rgb(14 165 233 / 15%);
      backdrop-filter: blur(4px);
      text-align: left;
      font-size: 0.72rem;
      line-height: 1.45;
      letter-spacing: 0.01em;
      color: rgb(186 230 253 / 82%);
      animation: hero-card-float 10s ease-in-out infinite;
    }
    .hero-code-card p {
      margin: 0;
      white-space: pre;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    }
    .hero-code-lang {
      margin-bottom: 0.35rem !important;
      color: rgb(125 211 252 / 95%);
      text-transform: uppercase;
      font-size: 0.62rem;
      letter-spacing: 0.08em;
      font-weight: 600;
    }
    .hero-code-card-a {
      top: 9%;
      left: 2%;
      --hero-card-rot: -7deg;
      animation-delay: -1s;
    }
    .hero-code-card-b {
      top: 6%;
      right: 3%;
      --hero-card-rot: 8deg;
      animation-delay: -2.5s;
    }
    .hero-code-card-c {
      top: 36%;
      left: -2%;
      --hero-card-rot: -4deg;
      animation-delay: -3.5s;
    }
    .hero-code-card-d {
      top: 33%;
      right: -1%;
      --hero-card-rot: 5deg;
      animation-delay: -2.2s;
    }
    .hero-code-card-e {
      bottom: 9%;
      left: 6%;
      --hero-card-rot: -6deg;
      animation-delay: -4.2s;
    }
    .hero-code-card-f {
      bottom: 7%;
      right: 8%;
      --hero-card-rot: 6deg;
      animation-delay: -5.1s;
    }
    .hero-cta-shell {
      position: relative;
      border-radius: 28px;
      border: 1px solid rgb(148 163 184 / 18%);
      background: linear-gradient(180deg, rgb(5 13 28 / 84%), rgb(6 16 34 / 66%));
      box-shadow:
        inset 0 0 0 1px rgb(148 163 184 / 7%),
        0 24px 60px rgb(2 6 23 / 55%),
        0 0 40px rgb(14 165 233 / 15%);
      backdrop-filter: blur(10px);
      overflow: hidden;
    }
    .hero-cta-shell::before {
      content: "";
      position: absolute;
      inset: -45% -25%;
      background: conic-gradient(
        from 90deg at 50% 50%,
        transparent 0deg,
        rgb(56 189 248 / 34%) 95deg,
        transparent 185deg,
        rgb(52 211 153 / 26%) 280deg,
        transparent 360deg
      );
      opacity: 0.42;
      animation: hero-shell-spin 18s linear infinite;
    }
    .hero-cta-shell::after {
      content: "";
      position: absolute;
      inset: 1px;
      border-radius: 27px;
      background: linear-gradient(180deg, rgb(15 23 42 / 56%), rgb(2 6 23 / 18%));
    }
    .hero-cta-shell > * {
      position: relative;
      z-index: 1;
    }
    .hero-title-gradient > span {
      background: linear-gradient(to bottom, white, rgb(148 163 184));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }
    .hero-title-gradient > span.hero-suffix-line {
      background: linear-gradient(to bottom, rgb(148 163 184), rgb(100 116 139));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      margin-top: 0.25em;
    }
    .hero-rotating-wrap {
      --hero-word-height: 1.25em;
      min-width: 11ch;
      height: var(--hero-word-height);
      vertical-align: baseline;
      isolation: isolate;
      text-align: center;
    }
    .hero-rotating-word {
      height: var(--hero-word-height);
      min-height: var(--hero-word-height);
      line-height: 1.25;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      box-sizing: border-box;
    }
    .hero-rotating-word-gradient {
      --hue-word: 0deg;
      --hue-saturation: 85%;
      background: linear-gradient(
        90deg,
        hsl(var(--hue-word), var(--hue-saturation), 55%),
        hsl(calc(var(--hue-word) + 60deg), var(--hue-saturation), 55%),
        hsl(calc(var(--hue-word) + 120deg), var(--hue-saturation), 55%)
      );
      background-size: 200% 100%;
      background-position: 0% 50%;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      color: transparent;
      animation: hero-word-gradient-shift 6s ease-in-out infinite;
    }
    .hero-integrate-link {
      display: inline-block;
      animation: hero-link-pulse 2.5s ease-in-out infinite;
    }
    .hero-integrate-link:hover {
      animation: none;
      transform: translateY(-2px);
    }
    .hero-search-shell {
      position: relative;
      display: flex;
      align-items: center;
      border-radius: 14px;
      border: 1px solid rgb(56 189 248 / 45%);
      background: rgb(2 10 24 / 66%);
      box-shadow:
        inset 0 0 0 1px rgb(56 189 248 / 17%),
        0 0 32px rgb(14 165 233 / 20%);
      padding-left: 2.85rem;
    }
    .hero-search-icon {
      position: absolute;
      left: 1rem;
      top: 50%;
      transform: translateY(-50%);
      color: rgb(125 211 252 / 80%);
    }
    .hero-search-shell input {
      width: 100%;
      border: none;
      background: transparent;
      color: rgb(226 232 240);
      font-size: 1rem;
      padding: 0.95rem 1rem 0.95rem 0;
      outline: none;
    }
    .hero-search-shell input::placeholder {
      color: rgb(148 163 184 / 72%);
    }
    .hero-primary-cta {
      color: white;
      background: linear-gradient(90deg, #0ea5e9, #38bdf8);
      box-shadow:
        inset 0 0 0 1px rgb(125 211 252 / 26%),
        0 10px 30px rgb(14 165 233 / 34%);
      transition: transform 0.2s ease, box-shadow 0.2s ease, filter 0.2s ease;
    }
    .hero-primary-cta:hover {
      transform: translateY(-2px);
      filter: brightness(1.05);
      box-shadow:
        inset 0 0 0 1px rgb(125 211 252 / 34%),
        0 14px 36px rgb(14 165 233 / 45%);
    }
    .hero-secondary-cta {
      color: rgb(226 232 240);
      background: rgb(15 23 42 / 46%);
      border: 1px solid rgb(148 163 184 / 24%);
      box-shadow: inset 0 0 0 1px rgb(148 163 184 / 12%);
      transition: transform 0.2s ease, background-color 0.2s ease, border-color 0.2s ease;
    }
    .hero-secondary-cta:hover {
      transform: translateY(-2px);
      background: rgb(30 41 59 / 56%);
      border-color: rgb(148 163 184 / 40%);
    }
    @keyframes hero-word-gradient-shift {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }
    @keyframes hero-link-pulse {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-3px); }
    }
    @keyframes tunnel-slide-left {
      0% { transform: rotateY(75deg) translateZ(-400px) translateY(0); }
      100% { transform: rotateY(75deg) translateZ(-400px) translateY(-60px); }
    }
    @keyframes tunnel-slide-right {
      0% { transform: rotateY(-75deg) translateZ(-400px) translateY(0); }
      100% { transform: rotateY(-75deg) translateZ(-400px) translateY(-60px); }
    }
    @keyframes hero-noise-scan {
      0% { transform: translateY(-6%); }
      100% { transform: translateY(6%); }
    }
    @keyframes hero-glow-orbit {
      0%, 100% { transform: translate3d(0, 0, 0); }
      50% { transform: translate3d(1.25rem, 1rem, 0); }
    }
    @keyframes hero-beam-shift {
      0%, 100% { opacity: 0.32; }
      50% { opacity: 0.9; }
    }
    @keyframes hero-card-float {
      0%, 100% { transform: translate3d(0, 0, 0) rotate(var(--hero-card-rot, 0deg)); }
      50% { transform: translate3d(0, -9px, 0) rotate(var(--hero-card-rot, 0deg)); }
    }
    @keyframes hero-shell-spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    @media (max-width: 1024px) {
      .hero-code-card {
        width: min(15.25rem, 44vw);
      }
      .hero-code-card-e,
      .hero-code-card-f {
        display: none;
      }
    }
    @media (max-width: 768px) {
      .hero-rotating-wrap {
        min-width: 0;
        max-width: 100%;
        width: fit-content;
        margin-inline: auto;
      }
      .hero-code-card-c,
      .hero-code-card-d {
        display: none;
      }
      .hero-code-card-a {
        top: 6%;
        left: -8%;
        opacity: 0.7;
      }
      .hero-code-card-b {
        top: 5%;
        right: -8%;
        opacity: 0.7;
      }
      .hero-cta-shell {
        border-radius: 24px;
      }
      .hero-cta-shell::after {
        border-radius: 23px;
      }
    }
    @media (prefers-reduced-motion: reduce) {
      .hero-rotating-word-gradient,
      .hero-integrate-link,
      .hero-bg-tunnel::before,
      .hero-bg-tunnel::after,
      .hero-bg-noise,
      .hero-bg-glow,
      .hero-bg-beam,
      .hero-code-card,
      .hero-cta-shell::before {
        animation: none !important;
      }
      .hero-rotating-word-gradient {
        background-position: 0% 50%;
      }
    }
  </style>

  <section class="container-xl pb-20">
    <div class="flex items-center justify-between mb-8">
      <h2 class="text-xl font-semibold text-white">Recursos destacados</h2>
      <a href="/es/library" class="text-sm text-brand-400 hover:text-brand-300 font-medium">Ver todos →</a>
    </div>
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
      {featured.map((resource: any) => (
        <ResourceCard resource={resource} locale={locale} />
      ))}
    </div>
  </section>
</Base>
